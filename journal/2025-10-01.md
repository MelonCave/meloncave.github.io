# 2025-10-01

## Sguaba: Type-safe spatial math in Rust

When an outfit like the [German drone defense company](https://en.wikipedia.org/wiki/Helsing_(company)) [Helsing](https://blog.helsing.ai/ai-for-ukraine-recovery-hackathon-eac351a3afad) writes [open source software libraries for systems that HAVE TO handle real-world coordinates](https://github.com/helsing-ai), the question of what coordinate system those coordinates are in, and how they’re represented, comes up a lot. And getting it wrong in even a single place opens the door to disastrous consequences ... especially for geometric guidance or precision positioning systems that use Rust, because those demands of those systems are critical enough that the developers actually NEED the speed of something like Rust, ie ***it's not just a gaming engine***, where close is good enough -- there's no tolerance for: "So what if it's wrong? YOLO". 

Toward that end, for work, [Jon Gjengset](https://www.youtube.com/@jonhoo) wrote the now-open-source [crate Sguaba](https://github.com/helsing-ai/sguaba), which is named after the self-navigating boat Sguaba Tuinne ('Wave-sweeper') of the Celtic deity [Manannán mac Lir](https://en.wikipedia.org/wiki/Manann%C3%A1n_mac_Lir) that is navigated solely by the thoughts of its pilot. [Sguaba is a Rust crate](https://youtu.be/kESBAiTYMoQ?si=nB_WojgFJ9zC4f4u) that is worth thinking about and really understanding ... only because, sometimes it is necessary to really delve into details like strongly-typed coordinates and vectors with their respective coordinate system and conversions implemented between them ... EVERYBODY, eg CAD jockets, implicitly assumes *their* coordinate system is anchored at the Center of the Universe and everyone else should standardize on their origin ... some, like AI artists don't care about PRECISE location or actually prefer imprecise fuzziness ...  but PRECISE location is always about WHY location actually matters, ie gravity, and where gravity is goint to put all other references ... *without gravity, you can't locate anything.* 

There are a wide variety of ways to describe the locations of objects in abstract space. To name a few, there is: [World Geodetic System, WGS84 the current standard](https://en.wikipedia.org/wiki/World_Geodetic_System), the well-known Earth-bound system of latitude and longitude; [ECEF (“Earth-centered, Earth-fixed”)](https://en.wikipedia.org/wiki/Earth-centered,_Earth-fixed_coordinate_system), a Cartesian coordinate system fixed to Earth’s axes. A planetary coordinate system (also referred to as planetographic, planetodetic, or planetocentric) is a generalization of the geographic, geodetic, and the geocentric coordinate systems for planets other than Earth. Coordinate systems similiar to the World Geodetic System are defined for other solid celestial bodies, such as in the selenographic coordinates for the Moon.  As with any spatial reference system, ECEF consists of an abstract coordinate system (in this case, a conventional three-dimensional right-handed system), and a geodetic datum that binds the coordinate system to actual locations on the Earth. The ECEF that is used for the Global Positioning System (GPS) is the [geocentric WGS84]((https://en.wikipedia.org/wiki/World_Geodetic_System)), which currently includes its own ellipsoid definition.

What immediately becomes apparent is that these coordinate systems can matter ONLY in the orbit of the dominant celestial body [anywhere that another large celestial body or collection of bodies exert a greater gravitational "revelance" on the geometries of movements in that location.] ... *without gravity, you can't locate anything.* 

For example, the ECEF coordinate system has the following parameters:

 * origin at the center of the chosen ellipsoid. In WGS84, this is center of mass of the Earth ... the center of "gravitational relevance" driving the location/placement of all LARGE reference points.
* Z axis is the line between the North and South Poles, with positive values increasing northward. In WGS 84, this is the international reference pole (IRP), which does not exactly coincide with the Earth's rotational axis, The slight "wobbling" of the rotational axis is known as polar motion, and can actually be measured against an ECEF.
* X axis is in the plane of the equator, passing through the origin and extending from 180° longitude (negative) to the prime meridian (positive); in WGS84, this is the IERS Reference Meridian.
* Y axis is also in the plane of the equator, passing through extending from 90°W longitude (negative) to 90°E longitude (positive)

Contemplation of these coodinate system parameters quickly reveals why things are extremely releveant anywhere on Earth like WGS84 cease to be relevant anywhere outside the Earth's outer orbit ... *without gravity, you can't locate anything.* 